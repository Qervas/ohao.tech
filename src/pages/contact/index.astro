---
import Layout from '../../layouts/Layout.astro';
import Icon from '../../components/Icon.astro';

const contactMethods = [
  {
    icon: 'lucide:mail',
    title: 'Email Me',
    description: 'I usually respond within 24 hours',
    value: 'hello@ohao.tech',
    link: 'mailto:hello@ohao.tech',
    color: 'text-blue-500',
    bg: 'bg-blue-50 dark:bg-blue-500/10'
  },
  {
    icon: 'lucide:github',
    title: 'GitHub',
    description: 'Check out my open-source work',
    value: '@yourusername',
    link: 'https://github.com/yourusername',
    color: 'text-gray-800 dark:text-gray-200',
    bg: 'bg-gray-100 dark:bg-gray-800'
  },
  {
    icon: 'lucide:twitter',
    title: 'Twitter',
    description: 'Follow me for updates',
    value: '@yourusername',
    link: 'https://twitter.com/yourusername',
    color: 'text-sky-500',
    bg: 'bg-sky-50 dark:bg-sky-500/10'
  },
  {
    icon: 'lucide:linkedin',
    title: 'LinkedIn',
    description: 'Connect professionally',
    value: 'in/yourusername',
    link: 'https://linkedin.com/in/yourusername',
    color: 'text-blue-600',
    bg: 'bg-blue-50 dark:bg-blue-500/10'
  }
];
---

<Layout title="Contact">
  <!-- Hero Section -->
  <section class="py-16 md:py-24 relative overflow-hidden">
    <div class="absolute inset-0 -z-10">
      <div class="absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-primary/10 to-transparent opacity-40"></div>
      <div class="absolute inset-0 bg-grid-pattern opacity-5"></div>
    </div>
    
    <div class="container px-4 sm:px-6 lg:px-8 mx-auto text-center">
      <h1 class="text-3xl md:text-5xl font-bold tracking-tight mb-6">
        Get in <span class="text-primary">Touch</span>
      </h1>
      <p class="text-xl text-muted-foreground max-w-3xl mx-auto">
        Have a project in mind or want to chat? Feel free to reach out!
      </p>
    </div>
  </section>

  <!-- Contact Methods -->
  <section class="py-16">
    <div class="container px-4 sm:px-6 lg:px-8 mx-auto">
      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-6xl mx-auto">
        {contactMethods.map((method) => (
          <a 
            href={method.link} 
            target="_blank"
            rel="noopener noreferrer"
            class="group p-6 rounded-xl border border-border/50 hover:border-primary/30 transition-colors hover:shadow-lg"
          >
            <div class={`w-12 h-12 rounded-lg flex items-center justify-center mb-4 ${method.bg} ${method.color} group-hover:scale-110 transition-transform`}>
              <Icon name={method.icon} className="w-6 h-6" />
            </div>
            <h3 class="font-medium text-lg mb-1">{method.title}</h3>
            <p class="text-sm text-muted-foreground mb-2">{method.description}</p>
            <p class="text-sm font-medium group-hover:text-primary transition-colors">
              {method.value}
              <Icon name="ArrowUpRight" className="inline-block w-3.5 h-3.5 ml-1 opacity-0 group-hover:opacity-100 group-hover:translate-x-0.5 transition-all" />
            </p>
          </a>
        ))}
      </div>
    </div>
  </section>

  <!-- Contact Form -->
  <section class="py-16 bg-accent/20">
    <div class="container px-4 sm:px-6 lg:px-8 mx-auto">
      <div class="max-w-3xl mx-auto bg-background rounded-2xl border border-border/50 p-8 md:p-10 shadow-sm">
        <div class="text-center mb-10">
          <h2 class="text-2xl font-bold mb-2">Send Me a Message</h2>
          <p class="text-muted-foreground">I'll get back to you as soon as possible</p>
        </div>
        
        <form class="space-y-6">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label for="name" class="block text-sm font-medium mb-2">Name</label>
              <input 
                type="text" 
                id="name" 
                name="name"
                required
                class="w-full px-4 py-3 rounded-lg border border-border/50 bg-background focus:border-primary/50 focus:ring-2 focus:ring-primary/20 outline-none transition-colors"
                placeholder="Your name"
              />
            </div>
            <div>
              <label for="email" class="block text-sm font-medium mb-2">Email</label>
              <input 
                type="email" 
                id="email" 
                name="email"
                required
                class="w-full px-4 py-3 rounded-lg border border-border/50 bg-background focus:border-primary/50 focus:ring-2 focus:ring-primary/20 outline-none transition-colors"
                placeholder="your.email@example.com"
              />
            </div>
          </div>
          
          <div>
            <label for="subject" class="block text-sm font-medium mb-2">Subject</label>
            <input 
              type="text" 
              id="subject" 
              name="subject"
              required
              class="w-full px-4 py-3 rounded-lg border border-border/50 bg-background focus:border-primary/50 focus:ring-2 focus:ring-primary/20 outline-none transition-colors"
              placeholder="How can I help you?"
            />
          </div>
          
          <div>
            <label for="message" class="block text-sm font-medium mb-2">Message</label>
            <textarea 
              id="message" 
              name="message"
              rows="5"
              required
              class="w-full px-4 py-3 rounded-lg border border-border/50 bg-background focus:border-primary/50 focus:ring-2 focus:ring-primary/20 outline-none transition-colors"
              placeholder="Tell me about your project..."
            ></textarea>
          </div>
          
          <div class="pt-2">
            <button 
              type="submit"
              class="w-full md:w-auto inline-flex items-center justify-center px-8 py-3.5 text-base font-medium rounded-full bg-primary text-primary-foreground hover:bg-primary/90 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary/50"
            >
              Send Message
              <Icon name="Send" className="ml-2 w-4 h-4" />
            </button>
          </div>
        </form>
      </div>
    </div>
  </section>
  
  <!-- Map Section -->
  <section class="py-16">
    <div class="container px-4 sm:px-6 lg:px-8 mx-auto">
      <div class="bg-background rounded-2xl overflow-hidden border border-border/50 shadow-sm">
        <div class="aspect-w-16 aspect-h-9 w-full">
          <iframe 
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2035.0000000000002!2d18.068999999999998!3d59.3295!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x465f9d0d9e3b5f3b%3A0x1e8f37f8f5e0f5f0!2sStockholm%2C%20Sweden!5e0!3m2!1sen!2sse!4v1234567890123!5m2!1sen!2sse" 
            width="100%" 
            height="450" 
            style="border:0;" 
            allowfullscreen="" 
            loading="lazy"
            class="w-full h-[450px]"
            title="My Location"
          ></iframe>
        </div>
        <div class="p-6 md:p-8">
          <h3 class="text-xl font-bold mb-4">Based in Stockholm, Sweden</h3>
          <p class="text-muted-foreground">
            I'm currently based in Stockholm, but I work with clients from all over the world. 
            Timezone: <span class="font-medium text-foreground">CET (UTC+1)</span>
          </p>
        </div>
      </div>
    </div>
  </section>
</Layout>

<script>
  // Form submission handling
  const form = document.querySelector('form');
  
  if (form) {
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const formData = new FormData(form);
      const data = Object.fromEntries(formData.entries());
      
      try {
        // Replace with your form submission endpoint
        const response = await fetch('https://api.yourdomain.com/contact', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data),
        });
        
        if (response.ok) {
          // Show success message
          const successMessage = document.createElement('div');
          successMessage.className = 'mt-4 p-4 rounded-lg bg-green-50 dark:bg-green-900/30 text-green-800 dark:text-green-200';
          successMessage.textContent = 'Thank you for your message! I will get back to you soon.';
          form.appendChild(successMessage);
          form.reset();
          
          // Scroll to success message
          setTimeout(() => {
            successMessage.scrollIntoView({ behavior: 'smooth' });
          }, 100);
        } else {
          throw new Error('Failed to send message');
        }
      } catch (error) {
        // Show error message
        const errorMessage = document.createElement('div');
        errorMessage.className = 'mt-4 p-4 rounded-lg bg-red-50 dark:bg-red-900/30 text-red-800 dark:text-red-200';
        errorMessage.textContent = 'Something went wrong. Please try again later or contact me directly at hello@ohao.tech';
        form.appendChild(errorMessage);
        
        // Scroll to error message
        setTimeout(() => {
          errorMessage.scrollIntoView({ behavior: 'smooth' });
        }, 100);
      }
    });
  }
</script>
